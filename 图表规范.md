# 智慧能源系统BOS后台图表设计规范

基于Dashboard页面中"销售趋势"和"销售占比"图表的设计标准，制定本图表规范，用于统一项目中所有图表的视觉表现和交互行为。

## 设计理念

### 整体风格
- 采用企业级应用的简洁现代风格
- 以蓝色为主色调，搭配白色背景，体现专业性和清晰度  
- 图表设计遵循一致性原则，保持统一的设计语言
- 数据可视化清晰直观，便于业务人员快速理解数据

### 技术栈
- 基于 **ReactECharts** (Apache ECharts) 实现
- 配合 Ant Design 组件库的卡片容器
- 支持响应式布局和交互功能

## 参考案例分析

### 案例一：销售趋势图表（折线图）

**位置**: `src/pages/Dashboard.js:14-51` 和 `src/pages/Dashboard.js:260-264`

**设计特点**:
```javascript
const salesOption = {
  title: {
    text: '近7天销售趋势',
  },
  tooltip: {
    trigger: 'axis',
  },
  legend: {
    data: ['油品销售', '非油品销售'],
  },
  grid: {
    left: '3%',
    right: '4%', 
    bottom: '3%',
    containLabel: true,
  },
  xAxis: {
    type: 'category',
    boundaryGap: false,
    data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
  },
  yAxis: {
    type: 'value',
  },
  series: [
    {
      name: '油品销售',
      type: 'line',
      data: [12000, 13200, 10100, 13400, 15000, 16400, 17500],
    },
    {
      name: '非油品销售', 
      type: 'line',
      data: [2200, 1820, 1910, 2340, 2900, 3300, 3100],
    },
  ],
};
```

**布局规范**:
- 栅格宽度：`Col span={16}` (较宽布局)
- 图表高度：`350px`
- 容器：Ant Design Card 组件包裹

### 案例二：销售占比图表（饼图）

**位置**: `src/pages/Dashboard.js:53-90` 和 `src/pages/Dashboard.js:265-269`

**设计特点**:
```javascript
const pieOption = {
  title: {
    text: '销售占比',
    left: 'center',
  },
  tooltip: {
    trigger: 'item',
    formatter: '{a} <br/>{b} : {c} ({d}%)',
  },
  legend: {
    orient: 'vertical',
    left: 'left',
    data: ['92#汽油', '95#汽油', '0#柴油', '食品饮料', '汽车用品'],
  },
  series: [
    {
      name: '销售额',
      type: 'pie',
      radius: '55%',
      center: ['50%', '60%'],
      data: [
        { value: 35000, name: '92#汽油' },
        { value: 25000, name: '95#汽油' },
        { value: 18000, name: '0#柴油' },
        { value: 8000, name: '食品饮料' },
        { value: 6000, name: '汽车用品' },
      ],
      emphasis: {
        itemStyle: {
          shadowBlur: 10,
          shadowOffsetX: 0,
          shadowColor: 'rgba(0, 0, 0, 0.5)',
        },
      },
    },
  ],
};
```

**布局规范**:
- 栅格宽度：`Col span={8}` (较窄布局)
- 图表高度：`350px`
- 容器：Ant Design Card 组件包裹

## 通用图表规范

### 1. 容器规范

#### Card 容器标准
```jsx
<Card title="图表标题" className="dashboard-card">
  <ReactECharts option={chartOption} style={{ height: 350 }} />
</Card>
```

#### 布局栅格
```jsx
<Row gutter={16} style={{ marginTop: 16 }}>
  <Col span={16}>  {/* 趋势类图表 - 较宽 */}
    <Card title="销售趋势" className="dashboard-card">
      <ReactECharts option={salesOption} style={{ height: 350 }} />
    </Card>
  </Col>
  <Col span={8}>   {/* 占比类图表 - 较窄 */}
    <Card title="销售占比" className="dashboard-card">
      <ReactECharts option={pieOption} style={{ height: 350 }} />
    </Card>
  </Col>
</Row>
```

### 2. 图表尺寸规范

| 图表类型 | 建议宽度 | 固定高度 | 栅格比例 |
|---------|---------|---------|---------|
| 折线图/柱状图 | 自适应 | 350px | span={16} 或 span={12} |
| 饼图/环形图 | 自适应 | 350px | span={8} 或 span={6} |
| 仪表盘 | 自适应 | 280px | span={6} |
| 大型趋势图 | 自适应 | 400px | span={24} |

### 3. 标题规范

#### 图表标题
- **位置**: ECharts title 配置
- **字体**: 默认字体，无需特殊设置
- **对齐方式**: 
  - 折线图/柱状图：默认左对齐
  - 饼图/环形图：居中对齐 `left: 'center'`

#### Card 标题
- **设置**: `<Card title="图表标题">`
- **样式**: 跟随 Ant Design Card 默认样式

### 4. 图例规范

#### 折线图/柱状图图例
```javascript
legend: {
  data: ['系列1', '系列2', '系列3'],
  // 位置：默认顶部居中
}
```

#### 饼图图例
```javascript
legend: {
  orient: 'vertical',  // 垂直排列
  left: 'left',        // 左侧对齐
  data: ['类别1', '类别2', '类别3', '类别4', '类别5'],
}
```

### 5. 工具提示规范

#### 坐标轴触发（折线图/柱状图）
```javascript
tooltip: {
  trigger: 'axis',
}
```

#### 数据项触发（饼图）
```javascript
tooltip: {
  trigger: 'item',
  formatter: '{a} <br/>{b} : {c} ({d}%)',
}
```

### 6. 网格和边距规范

#### 标准网格设置
```javascript
grid: {
  left: '3%',
  right: '4%',
  bottom: '3%',
  containLabel: true,  // 确保标签完整显示
}
```

## 样式和配色规范

### 1. 全局配色变量
```css
:root {
  --primary-color: #32AF50;        /* 主色调 - 绿色 */
  --primary-color-light: #4FC16A;  /* 主色调浅色 */
  --primary-color-dark: #278C3F;   /* 主色调深色 */
  --chart-color-1: #32AF50;        /* 图表主色 */
  --chart-color-2: #1890ff;        /* 图表副色 */
  --chart-color-3: #f5222d;        /* 图表强调色 */
  --border-radius: 2px;            /* 统一圆角 */
}
```

### 2. Card 容器样式
```css
.dashboard-card {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  border-radius: 2px;
}
```

### 3. 图表配色方案

#### 推荐色彩序列
```javascript
// ECharts 配色
color: [
  '#32AF50',  // 主绿色
  '#1890ff',  // 蓝色  
  '#f5222d',  // 红色
  '#fa8c16',  // 橙色
  '#722ed1',  // 紫色
  '#13c2c2',  // 青色
  '#eb2f96',  // 品红色
  '#52c41a',  // 绿色
]
```

## 响应式设计规范

### 1. 栅格断点适配
```jsx
// 大屏幕 (≥1200px)
<Col xl={16} lg={14} md={24} sm={24} xs={24}>
  <Card title="销售趋势">
    <ReactECharts option={salesOption} style={{ height: 350 }} />
  </Card>
</Col>

<Col xl={8} lg={10} md={24} sm={24} xs={24}>
  <Card title="销售占比">
    <ReactECharts option={pieOption} style={{ height: 350 }} />
  </Card>
</Col>
```

### 2. 移动端适配
- 小屏幕下所有图表占满宽度 `span={24}`
- 图表高度保持不变，确保可读性
- 工具提示和图例自动适配

## 交互功能规范

### 1. 标准交互功能
- **缩放**: 折线图支持数据缩放 `dataZoom`
- **图例切换**: 点击图例显示/隐藏对应系列
- **数据提示**: 鼠标悬停显示详细数据
- **高亮强调**: 饼图扇形悬停阴影效果

### 2. 强调效果配置
```javascript
emphasis: {
  itemStyle: {
    shadowBlur: 10,
    shadowOffsetX: 0,
    shadowColor: 'rgba(0, 0, 0, 0.5)',
  },
}
```

## 实施指南

### 1. 组件引入
```javascript
import React from 'react';
import { Card, Row, Col } from 'antd';
import ReactECharts from 'echarts-for-react';
```

### 2. 基础模板
```jsx
const ChartComponent = () => {
  const chartOption = {
    // 按照本规范配置图表选项
  };

  return (
    <Row gutter={16}>
      <Col span={16}>
        <Card title="图表标题" className="dashboard-card">
          <ReactECharts 
            option={chartOption} 
            style={{ height: 350 }} 
          />
        </Card>
      </Col>
    </Row>
  );
};
```

### 3. 注意事项
- 所有图表必须使用 Card 组件包裹
- 图表高度统一使用 350px
- 遵循栅格系统进行布局
- 保持配色一致性
- 确保图表在不同屏幕尺寸下的可用性

---

本规范基于 `src/pages/Dashboard.js` 中销售趋势和销售占比图表的实际实现制定，为项目中其他图表的开发提供标准参考。
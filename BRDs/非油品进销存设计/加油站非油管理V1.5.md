# 加油站非油管理



## 主数据管理

1. 商品主数据（商品信息，SKU编码，条形码，商品分类，规格，默认售价，销售基础单位和辅助单位（换算比例），进货单位（最小单位控制，按照固定比例下单），进项税，销项税，税收分类信息，税率，是否免税，ERP商品码和ERP分类码，最小库存，最大库存，保质期，临期预警天数）
2. 商品分类管理，采用三级分类，便于与ERP集成
3. 商品供应商管理，包含供应商基本信息（供应商编号，名称，联系人，地址，联系电话，邮箱，状态，附件，合同文件），供应商的商品清单（需要与商品主数据关联，多个供应商对应多个商品n→m的关系，商品是否可以退货），供应商的价格清单（包含每个商品的当前报价和历史报价），供应商结算单（每次采购后与供应商结算的数据）
4. 仓库管理，暂时不做

## 采购申请，进货和退货流程

1、采购申请需要由油站发起，分公司或者集团管理员汇总后，统一向供应商发起采购

2、目前的采购申请分为 

- 面向中石化购买机油等产品的采购和汇总
- 普通积分商品的采购和汇总
- 京东企业购积分商品的采购和汇总
- 京东积分商品专项采购（发货到人）的采购和汇总

- 尿素的采购和汇总，因为各个油站使用的尿素加注机不同，所以每个站都会采购对应品牌的尿素（包括桶装和散装），需要与供应商进行定期结算，部分尿素在进货时会有赠品，这里需要考虑到赠品对于库存和销售的影响。
- 驿购小商品的采购和汇总（通过畅行公司）

3、入库：包括进货，调入，调出，退货，作废

4、关于入库商品和库存商品批次管理的问题，这部分需要深度讨论和设计

5、关于采购申请的数量控制的问题，综合油站过去30天的销售数量和当前的库存情况，对每个站的采购申请数量进行限制，通过算法的方式处理，防止油站过度申请商品，导致库存积压或者过期

6、采购成本价格管理的部分，需要考虑到2个方面，一个方面是面向供应商结算的成本（特别是批次），另一个方面是内部统计的时候（如何正确使用加权平均计算）



## 核心要关注的问题

1、商品从哪来到哪去，特别是关于仓库的问题，需要充分理解

2、分公司在这里面是如何参与的

3、哪些步骤需要审批，哪些不需要?

4、不同供应商结算方式，是由分公司负责结算还是由总公司负责结算





### 与Gemini一些关键问题的讨论



# 非油品供应商管理部分设计

当然可以。您的这个思路非常好，我们先把一个核心功能点打磨好，再逐步扩展。聚焦于独立的供应商基本信息管理是项目起步的绝佳方式。

您提出的字段列表非常清晰，完全可以构成一个功能完备的“供应商列表”页面。下面，我将基于您提供的字段，为您设计一个标准的、易于使用的列表页面方案。

------

### 页面设计方案：供应商列表 (Supplier List)

**二级页面名称：** 供应商管理 / 供应商列表

**Tab标签名称：**非油供应商列表

#### 1. 页面布局和核心元素

一个标准的列表页通常包含三个主要区域：**搜索筛选区**、**操作区**和**数据列表区**。

**(1) 搜索与筛选区 (Search and Filter Area)**

帮助用户在众多供应商中快速找到目标。

- **搜索框**：一个通用的输入框，用户可以输入 `供应商名称`、`代码` 等关键词进行模糊搜索。
- **状态筛选**：一个下拉选择器，选项包括：`全部状态`、`启用`、`禁用`。这是最常用的筛选条件。
- **[ 查询 ]** 按钮 和 **[ 重置 ]** 按钮。

**(2) 操作区 (Top Action Area)**

这里放置页面级的核心操作按钮。

- **[ + 新建供应商 ]** 按钮：这是最重要的按钮，点击后会跳转到“新建供应商信息”的独立页面或弹出一个表单窗口，用于录入全新的供应商资料。
- **[ 导出 ]** 按钮 (可选，但建议有)：允许用户将当前的供应商列表（或筛选后的结果）导出为 Excel 或 CSV 文件，方便线下处理和存档。

**(3) 供应商数据列表 (The Data Grid / Table)**

这是页面的核心，以表格形式展示所有供应商信息。

| 列名               | 字段说明与建议                                               | 示例                                                         |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **供应商ID**       | 系统的唯一标识符，通常由系统自动生成。                       | `SUP-20250828-001`                                           |
| **供应商代码**     | 用户自定义的代码，可能用于与ERP或财务系统对接。              | `VDR-KD003`                                                  |
| **供应商名称**     | 供应商的法定全称，应设为**可点击**链接，点击后进入该供应商的详情/编辑页面。 | `环球汽配贸易有限公司`                                       |
| **主要联系人**     | 业务对接的主要联系人姓名。                                   | `李经理`                                                     |
| **联系电话**       | 主要联系人的手机或座机号码。                                 | `138-0000-8888`                                              |
| **电子邮箱**       | 用于发送订单、对账单等。                                     | `contact@globalparts.com`                                    |
| **状态**           | 建议使用**带颜色的标签(Tag/Badge)进行可视化区分，一目了然。  | <font color="green">● 启用</font> / <font color="gray">● 禁用</font> |
| 评级               | 建议使用A，B，C，D来直观展示。                               | `★★★★☆`                                                      |
| 合同/附件          | 显示一个附件图标 (📎)** 并附上文件数量。点击图标可弹窗展示附件列表并支持下载。 | `📎 (3)`                                                      |
| **操作 (Actions)** | 每一行末尾的操作列，这是**关键交互**。                       | `[编辑]` `[禁用]` `[删除]`                                   |

**“操作”列详细说明：**

- **[ 编辑 ]**：点击后跳转到该供应商的详细信息页面，并处于可编辑状态。
- **[ 禁用 / 启用 ]**：这是一个状态切换按钮。如果当前状态是“启用”，按钮显示为“禁用”，点击后状态变为禁用。反之亦然。这比删除更常用，可以保留数据但使其在业务流程中不可选。
- **[ 删除 ]**：高风险操作，点击后应有二次确认弹窗（“您确定要删除该供应商吗？”）。通常建议，如果该供应商已经有关联的采购订单等业务数据，则不允许物理删除，只能“禁用”。

------

### 总结

您提出的字段列表是完全可行的，我在此基础上为您细化了页面的**交互设计**和**视觉呈现建议**（如状态标签、星级评级、附件图标等），并规划了必要的操作功能（新建、搜索、编辑、状态切换等）。

这个设计方案：

- **功能聚焦**：完全围绕您提出的供应商基本信息管理，不涉及其他复杂内容。
- **用户友好**：界面布局清晰，关键信息可视化，操作直观。
- **可扩展性强**：未来要增加商品、价格等管理时，可以从“供应商名称”或“编辑”按钮链接到新的页面，现有结构无需大的改动。

这个方案可以直接作为您撰写产品需求文档（PRD）的蓝本。



> 下一步我要开始设计供应商的商品和价格清单，首先我们要讨论一个问题，供应商的商品如何与我的主数据关联，因为成本价格和销售价格都是是波动的，我的商品成本价格都需要与供应商的报价保持一致，销售价格要根据市场变化设置，我要如何管理和维护销售价格和成本价格呢？

好的，我们来解决这个至关重要的问题。您遇到的正是零售和分销系统中关于**定价与成本管理**的核心，这个问题处理得好坏，直接决定了系统的业务价值。

您的理解非常到位：成本价来自供应商，是采购行为的依据；销售价面向市场，是销售行为的依据。它们需要关联，但又必须能独立变化。

要完美地解决这个问题，我们需要引入一个核心设计思想，并在系统流程上予以支撑。

------

### 1. 核心设计思想：人、货、价 分离与关联

这是一个经典的供应链系统设计原则，能帮我们理清思路：

- **人 (Supplier - 供应商)**：谁提供货。即您的【供应商主数据】。
- **货 (Product - 商品)**：我们卖什么。即您的【商品主数据 (SKU)】。
- **价 (Price - 价格)**：这里的“价”要一分为二：
  - **成本价 (Cost Price)**：它不属于“货”的固有属性，而是“人”与“货”**交易关系**的属性。即，**供应商A**卖给我的**燃油宝**是15元，**供应商B**卖给我的**同一个燃油宝**可能是15.5元。
  - **销售价 (Sales Price)**：这是“货”在我们自己的销售渠道中的属性。即，我的加油站决定将**燃油宝**卖25元。

**结论**：我们必须把“成本价”和“销售价”在数据结构和管理界面上彻底分开。

#### 数据如何关联？

1. **供应商与商品关联**：您需要一个**“供应商商品目录 (Supplier Product Catalog)”**的中间表/功能。
   - 这个功能用来建立`“哪个供应商”`可以供应`“哪个商品(我们的SKU)”`的对应关系 (多对多)。
   - 在这层关系上，还可以记录该供应商对这个商品的内部编码、起订量等。
2. **成本价的归属**：成本价清单应该挂在**“供应商商品目录”**这个关系之下。
   - 一个SKU可以对应多个供应商，因此就会有多套成本价。
   - `系统设计`：【供应商A】->【燃油宝】->【价格清单(含阶梯价、有效期)】
3. **销售价的归属**：销售价应该属于【**商品主数据 (SKU)**】的一部分。
   - 一个SKU在系统中只有一个标准的销售价（暂不考虑多渠道、多门店定价的复杂场景）。
   - `系统设计`：【燃油宝】-> `SalesPrice: 25.00`

------

### 2. 成本价格 (Cost Price) 的管理与维护

成本价的管理是一个**采购部门**的核心工作。

#### 功能设计供应商价格管理

您需要一个独立的页面，叫“供应商价格管理”或“采购价格清单”。

**操作流程：**

1. **选择供应商**：页面的入口是先选择一个供应商，例如“环球汽配贸易有限公司”。
2. **维护商品价格**：
   - 页面会列出该供应商所有可供应的商品列表。
   - 采购员可以为列表中的每一个商品，点击“维护价格”或“新增报价”。
   - 在弹出的窗口中，输入：
     - `采购价格 (Cost Price)`
     - `价格有效期`（非常重要！包括起始日期和结束日期）
     - `阶梯价格`（例如：买10箱一个价，买50箱另一个价）
     - `关联的单位`（是“瓶”的单价还是“箱”的单价）
3. **历史与当前**：系统会保存所有的价格记录。根据“价格有效期”，自动判断哪个是当前生效的价格。过期的价格则变为历史记录，用于查询和成本分析。

在采购流程中的应用：

当您创建一张向“环球汽配”采购“燃油宝”的采购订单(PO)时，系统会自动根据PO的创建日期，抓取当前有效的采购价格，填充到订单中。

------

### 3. 销售价格 (Sales Price) 的管理与维护

销售价的管理是一个**运营或销售部门**的核心工作。

#### 功能设计：商品调价管理

您可以在**商品主数据管理**模块中进行，或者设计一个独立的“商品调价单”功能以方便批量调价和留痕。

**操作流程（以在商品主数据中修改为例）：**

1. **找到商品**：运营人员在商品主数据列表中，找到“燃油宝”。
2. **编辑价格**：进入编辑页面，直接修改“销售价格”字段。
3. **智能辅助决策（关键设计点）**：
   - 在修改“销售价格”的输入框旁边，系统应该**自动显示该商品当前的参考成本价**。
   - 同时，系统**实时计算并显示毛利率 (Gross Margin)**。公式：`(销售价 - 参考成本价) / 销售价 * 100%`。
   - 这样，调价人员在输入`26`元时，系统立刻显示“毛利率：40%”（假设成本15.6元），输入`24`元时，显示“毛利率：35%”。这为定价决策提供了最直接的数据支持。
4. **历史追溯**：每次价格变更，系统都应记录一条日志，包含`操作人`、`操作时间`、`原价格`、`新价格`，形成“价格变更历史”。

#### “参考成本价”从哪里来？

既然一个商品有多个供应商，也就有多个成本价，那么在计算毛利率时，应该用哪个成本呢？

最佳实践是： 在您的【商品主数据】中，为每个商品设置一个“默认供应商 (Default Supplier)”或“主要供应商 (Primary Supplier)”。

系统就取这个默认供应商当前有效的采购价，作为计算毛利率的“参考成本价”。

------

### 总结

| 管理对象       | **成本价格 (Cost Price)**                | **销售价格 (Sales Price)**                |
| -------------- | ---------------------------------------- | ----------------------------------------- |
| **归属**       | 属于 **[供应商-商品]** 的关系            | 属于 **[商品]** 自身                      |
| **管理者**     | 采购部门                                 | 运营/销售部门                             |
| **管理功能**   | 独立的“供应商价格管理”页面               | “商品主数据编辑”或独立的“调价单”功能      |
| **核心流程**   | 采购员录入供应商报价，设定有效期         | 运营人员修改售价，系统显示毛利率辅助决策  |
| **如何生效**   | 创建采购订单时，根据供应商和日期自动抓取 | 修改后立即或在指定日期生效，影响POS机售价 |
| **与对方关系** | 与供应商报价**保持一致**                 | **参考**成本价，但根据市场**独立设置**    |

通过这种**分离但又相互参考**的设计，您的系统就能完美地支持成本与售价的动态管理，既保证了采购成本的准确性，又给予了销售定价足够的灵活性和数据支持。



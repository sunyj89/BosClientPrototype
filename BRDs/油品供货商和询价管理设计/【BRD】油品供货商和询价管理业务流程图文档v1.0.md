# 油品供货商和询价管理业务流程图文档 v1.0

**文档版本：** v1.0  
**创建日期：** 2025年7月18日  
**文档状态：** 初版

## 1. 文档概述

本文档描述了油品供货商和询价管理系统的核心业务流程，包括询价发布、供应商报价、中标确认等关键业务环节的流程图和说明。

## 2. 核心业务流程

### 2.1 油品询价发布流程

```mermaid
flowchart TD
    A[采购方登录系统] --> B[访问询价管理页面]
    B --> C[点击新建询价单]
    C --> D[填写询价单基本信息]
    D --> E{选择操作类型}
    E -->|保存草稿| F[保存为草稿状态]
    E -->|直接发布| G[验证询价单信息]
    G --> H{信息是否完整}
    H -->|否| I[提示信息不完整]
    I --> D
    H -->|是| J[生成询价单ID]
    J --> K[更新状态为询价中]
    K --> L[向选定供应商发送通知]
    L --> M[供应商收到询价通知]
    F --> N[询价单创建完成]
    M --> N
```

**流程说明：**
- **触发条件：** 采购方需要采购油品时
- **参与角色：** 采购方、系统、供应商
- **关键节点：** 询价单信息验证、供应商通知发送
- **异常处理：** 信息不完整时返回编辑页面

### 2.2 供应商报价流程

```mermaid
flowchart TD
    A[供应商登录门户] --> B[查看可参与的询价单]
    B --> C[选择感兴趣的询价单]
    C --> D[查看询价单详情]
    D --> E{是否参与报价}
    E -->|否| F[结束流程]
    E -->|是| G[点击提交报价]
    G --> H[填写报价信息]
    H --> I[上传相关附件]
    I --> J[验证报价信息]
    J --> K{信息是否有效}
    K -->|否| L[提示错误信息]
    L --> H
    K -->|是| M[计算总金额]
    M --> N[提交报价单]
    N --> O[更新状态为已提交]
    O --> P[采购方收到报价通知]
    P --> Q[报价流程完成]
```

**流程说明：**
- **触发条件：** 供应商收到询价通知或主动查看询价单
- **参与角色：** 供应商、系统、采购方
- **关键节点：** 报价信息验证、总金额计算
- **异常处理：** 报价信息无效时返回编辑页面

### 2.3 询价评估和中标确认流程

```mermaid
flowchart TD
    A[采购方查看报价单列表] --> B[比较不同供应商报价]
    B --> C[评估价格和服务条件]
    C --> D[选择最优报价]
    D --> E[点击确认中标]
    E --> F[填写中标原因]
    F --> G[确认中标操作]
    G --> H[更新报价单状态为已中标]
    H --> I[更新询价单状态为询价完成]
    I --> J[记录中标信息]
    J --> K[生成中标通知]
    K --> L[发送通知给中标供应商]
    L --> M[发送通知给其他供应商]
    M --> N[生成采购订单]
    N --> O[中标确认流程完成]
```

**流程说明：**
- **触发条件：** 询价截止时间到达或采购方主动结束询价
- **参与角色：** 采购方、系统、中标供应商、其他供应商
- **关键节点：** 报价比较评估、中标确认、通知发送
- **异常处理：** 无有效报价时重新发布询价

### 2.4 供应商管理流程

```mermaid
flowchart TD
    A[系统管理员登录] --> B[访问供应商管理页面]
    B --> C{选择操作类型}
    C -->|新增供应商| D[填写供应商基本信息]
    C -->|编辑供应商| E[选择要编辑的供应商]
    C -->|查看变更记录| F[查看供应商变更历史]
    D --> G[上传资质证书]
    G --> H[设置供应商等级]
    H --> I[设置合作状态]
    I --> J[保存供应商信息]
    E --> K[修改供应商信息]
    K --> L[记录变更历史]
    L --> J
    J --> M[更新供应商权限]
    M --> N[供应商管理完成]
    F --> O[查看变更详情]
    O --> N
```

**流程说明：**
- **触发条件：** 新增供应商、供应商信息变更、查看变更历史
- **参与角色：** 系统管理员、系统
- **关键节点：** 资质验证、等级设置、变更记录
- **异常处理：** 资质不完整时拒绝保存

### 2.5 采购订单创建流程

```mermaid
flowchart TD
    A[查看中标报价单] --> B[点击创建采购订单]
    B --> C[自动填充订单信息]
    C --> D[确认订单详情]
    D --> E[生成采购订单号]
    E --> F[保存采购订单]
    F --> G[发送订单给中标供应商]
    G --> H[更新订单状态]
    H --> I[采购订单创建完成]
```

**流程说明：**
- **触发条件：** 中标确认完成后
- **参与角色：** 采购方、系统、中标供应商
- **关键节点：** 订单信息自动填充、订单号生成
- **异常处理：** 订单信息有误时返回编辑

### 2.6 消息通知流程

```mermaid
flowchart TD
    A[业务事件触发] --> B{事件类型判断}
    B -->|询价发布| C[生成询价通知]
    B -->|报价提交| D[生成报价通知]
    B -->|中标确认| E[生成中标通知]
    B -->|状态变更| F[生成状态变更通知]
    C --> G[确定接收方]
    D --> G
    E --> G
    F --> G
    G --> H[发送通知消息]
    H --> I[更新消息状态]
    I --> J[接收方查看消息]
    J --> K[标记消息为已读]
    K --> L[消息通知流程完成]
```

**流程说明：**
- **触发条件：** 各种业务事件的发生
- **参与角色：** 系统、消息接收方
- **关键节点：** 消息生成、发送、状态更新
- **异常处理：** 发送失败时重试机制

## 3. 状态流转图

### 3.1 询价单状态流转

```mermaid
stateDiagram-v2
    [*] --> 草稿
    草稿 --> 待发布 : 保存草稿
    草稿 --> 已取消 : 删除询价单
    待发布 --> 询价中 : 发布询价
    待发布 --> 草稿 : 编辑询价单
    询价中 --> 报价结束 : 询价截止
    询价中 --> 已取消 : 中止询价
    报价结束 --> 询价完成 : 确认中标
    报价结束 --> 已取消 : 无有效报价
    询价完成 --> [*]
    已取消 --> [*]
```

### 3.2 报价单状态流转

```mermaid
stateDiagram-v2
    [*] --> 草稿
    草稿 --> 已提交 : 提交报价
    草稿 --> 已删除 : 删除报价
    已提交 --> 待确认 : 采购方查看
    已提交 --> 已拒绝 : 采购方拒绝
    待确认 --> 已接受 : 采购方接受
    待确认 --> 已拒绝 : 采购方拒绝
    已接受 --> 已中标 : 确认中标
    已接受 --> 未中标 : 其他供应商中标
    已中标 --> [*]
    未中标 --> [*]
    已拒绝 --> [*]
    已删除 --> [*]
```

### 3.3 供应商状态流转

```mermaid
stateDiagram-v2
    [*] --> 待审批
    待审批 --> 正常 : 审批通过
    待审批 --> 已驳回 : 审批拒绝
    正常 --> 暂停 : 暂停合作
    正常 --> 已驳回 : 取消合作
    暂停 --> 正常 : 恢复合作
    暂停 --> 已驳回 : 取消合作
    已驳回 --> 待审批 : 重新申请
    已驳回 --> [*]
```

## 4. 数据流转图

### 4.1 询价数据流转

```mermaid
flowchart LR
    A[采购方] --> B[询价单表单]
    B --> C[询价单数据]
    C --> D[数据库]
    D --> E[供应商门户]
    E --> F[供应商]
    F --> G[报价单表单]
    G --> H[报价单数据]
    H --> I[数据库]
    I --> J[询价管理页面]
    J --> A
```

### 4.2 供应商数据流转

```mermaid
flowchart LR
    A[系统管理员] --> B[供应商管理页面]
    B --> C[供应商数据]
    C --> D[数据库]
    D --> E[询价单筛选]
    E --> F[供应商门户]
    F --> G[供应商]
```

## 5. 异常处理流程

### 5.1 询价单异常处理

```mermaid
flowchart TD
    A[异常事件发生] --> B{异常类型判断}
    B -->|信息不完整| C[提示用户补充信息]
    B -->|供应商无响应| D[延长询价时间]
    B -->|系统故障| E[记录错误日志]
    C --> F[返回编辑页面]
    D --> G[发送延期通知]
    E --> H[系统恢复后重试]
    F --> I[异常处理完成]
    G --> I
    H --> I
```

### 5.2 报价单异常处理

```mermaid
flowchart TD
    A[报价异常] --> B{异常类型判断}
    B -->|价格异常| C[提示价格范围]
    B -->|文件上传失败| D[重新上传文件]
    B -->|网络超时| E[自动重试提交]
    C --> F[返回报价页面]
    D --> F
    E --> G{重试是否成功}
    G -->|是| H[提交成功]
    G -->|否| I[提示手动重试]
    F --> J[异常处理完成]
    H --> J
    I --> J
```

## 6. 流程优化建议

1. **自动化程度提升：** 在询价截止后自动发送提醒通知
2. **审批流程简化：** 对于小额询价单可以设置快速审批通道
3. **数据分析增强：** 增加报价趋势分析和供应商绩效评估
4. **移动端支持：** 开发移动端应用，支持移动办公
5. **集成能力扩展：** 与ERP系统集成，实现数据同步

## 7. 文档维护

- **版本控制：** 每次流程变更需要更新版本号
- **评审机制：** 流程变更需要经过业务部门和技术部门评审
- **培训计划：** 新流程上线前需要组织用户培训
- **监控指标：** 建立流程执行效率和质量监控指标 
# 油品供应商管理系统(BRD) 

## 1. 项目概述 (Project Overview)

### 1.1 项目背景与痛点 (Background and Pain Points)
当前油品采购市场面临着供应商管理分散、询价流程繁琐、报价透明度不足、中标结果处理效率低下等关键痛点。传统的人工管理方式无法满足现代化油品采购的需求，迫切需要一个集成化的供应商管理和采购询价系统来提升整体运营效率。

### 1.2 项目目标与价值 (Project Goals and Value Proposition)
* **主要目标：** 构建一个集供应商管理、询价管理、报价管理、中标处理于一体的油品采购管理平台，实现采购流程的数字化、规范化和自动化。
* **核心价值：** 
  - 提升供应商管理效率和质量
  - 简化询价和报价流程，降低人工成本
  - 增强采购透明度和公平性
  - 加快中标处理和订单生成速度
  - 实现采购数据的集中管理和追踪

### 1.3 项目范围 (Project Scope)
* **核心功能模块：** 
  - 油品供应商管理模块
  - 中标报价处理模块
  - 供应商门户模块
  - 油品询价管理模块

## 2. 用户分析 (User Analysis)

### 2.1 目标用户群体 (Target Audience)
* **采购经理/采购专员：** 负责发起询价、管理供应商、处理报价和确定中标方
* **供应商代表：** 通过门户系统参与询价、提交报价、查看中标结果
* **财务人员：** 负责订单确认、付款方式设定等财务相关操作
* **质量管理人员：** 负责供应商资质审核、质量保证书管理等

### 2.2 用户场景 (User Scenarios)
* **采购场景：** 采购人员发起油品询价，邀请合格供应商参与报价，收集和比较报价，确定中标方并生成采购订单
* **供应商参与场景：** 供应商通过门户查看询价信息，准备并提交报价，跟踪报价状态，接收中标通知
* **供应商管理场景：** 采购部门新增供应商信息，维护供应商资质，审批供应商变更，管理供应商生命周期

## 3. 产品需求 (Product Requirements)

### 3.1 功能需求 (Functional Requirements)

#### **模块一：油品供应商管理模块**

* **FR1.1 供应商信息管理**
  * **描述：** 支持供应商基本信息的新增、编辑、查看和删除操作
  * **输入：** 供应商名称、代码、联系人、联系电话、邮箱、地址、油品类型、等级、资质证书编号、状态等
  * **处理逻辑：** 表单验证→数据存储→状态更新→审批流程触发
  * **输出/预期结果：** 供应商信息成功保存，生成供应商ID，触发审批流程
* **FR1.2 供应商筛选查询**
  * **描述：** 支持按多种条件筛选供应商，包括名称、代码、油品类型、状态等
  * **输入：** 筛选条件（供应商名称、代码、油品类型、状态）
  * **处理逻辑：** 构建查询条件→执行筛选→返回结果列表
  * **输出/预期结果：** 过滤后的供应商列表
* **FR1.3 供应商详情查看**
  * **描述：** 提供供应商完整信息查看，包括基本信息、附件、合同和审批流程
  * **输入：** 供应商记录选择
  * **处理逻辑：** 获取供应商详细信息→生成审批流程时间线→展示附件和合同列表
  * **输出/预期结果：** 完整的供应商详情页面，包含审批状态和相关文档
* **FR1.4 供应商变更记录管理**
  * **描述：** 记录并展示供应商信息的所有变更历史
  * **输入：** 供应商变更操作
  * **处理逻辑：** 变更检测→记录生成→审批状态更新
  * **输出/预期结果：** 完整的变更记录列表，包含变更人、时间、审批状态
* **FR1.5 文件管理**
  * **描述：** 支持供应商资质文件和合同文件的上传、查看和下载
  * **输入：** 文件上传操作
  * **处理逻辑：** 文件格式验证→上传处理→URL生成→关联到供应商记录
  * **输出/预期结果：** 文件成功上传并关联到供应商

#### **模块二：中标报价处理模块**

* **FR2.1 中标报价单展示**
  * **描述：** 完整展示中标报价单的详细信息，包括询价信息、供应商信息、价格详情等
  * **输入：** 中标报价单数据
  * **处理逻辑：** 数据加载→格式化展示→状态标识
  * **输出/预期结果：** 结构化的报价单详情页面
* **FR2.2 采购订单创建**
  * **描述：** 基于中标报价单生成采购订单，支持订单信息编辑和确认
  * **输入：** 中标报价单数据，付款方式、订单日期等补充信息
  * **处理逻辑：** 预填报价信息→表单验证→订单生成→状态更新
  * **输出/预期结果：** 生成正式采购订单
* **FR2.3 供应商通知**
  * **描述：** 向中标供应商发送正式的中标通知邮件
  * **输入：** 收件人邮箱、邮件主题、内容、附件
  * **处理逻辑：** 邮件模板生成→内容编辑→发送处理
  * **输出/预期结果：** 中标通知邮件成功发送
* **FR2.4 报价确认单打印**
  * **描述：** 生成并打印正式的报价确认文档
  * **输入：** 报价确认请求
  * **处理逻辑：** 文档模板调用→数据填充→打印/PDF生成
  * **输出/预期结果：** 可打印的报价确认单
* **FR2.5 附件管理**
  * **描述：** 管理中标报价单相关的所有附件文档
  * **输入：** 附件查看/下载请求
  * **处理逻辑：** 权限验证→文件访问→下载处理
  * **输出/预期结果：** 安全的文件访问和下载

#### **模块三：供应商门户模块**

* **FR3.1 询价单浏览**
  * **描述：** 供应商可查看适合其资质的询价单列表，包含筛选和搜索功能
  * **输入：** 查询条件（关键词、油品类型、状态、日期范围）
  * **处理逻辑：** 权限过滤→条件匹配→结果排序→剩余时间计算
  * **输出/预期结果：** 符合条件的询价单列表
* **FR3.2 询价单详情查看**
  * **描述：** 提供询价单的完整详细信息，包括要求、条件、时间等
  * **输入：** 询价单选择
  * **处理逻辑：** 权限验证→详情获取→格式化展示
  * **输出/预期结果：** 完整的询价单详情页面
* **FR3.3 报价提交**
  * **描述：** 供应商针对询价单提交报价，包含价格、交期、附件等信息
  * **输入：** 报价表单数据（单价、运费、交货时间、备注、附件）
  * **处理逻辑：** 表单验证→确认对话框→一次性提交限制→状态更新
  * **输出/预期结果：** 报价成功提交，状态变更为"已提交"
* **FR3.4 报价管理**
  * **描述：** 供应商管理自己的历史报价，包括查看、编辑草稿、删除草稿等
  * **输入：** 报价操作请求
  * **处理逻辑：** 状态检查→权限验证→相应操作处理
  * **输出/预期结果：** 报价记录的增删改查
* **FR3.5 消息通知**
  * **描述：** 接收和查看系统消息，包括中标通知、询价邀请等
  * **输入：** 消息查看请求
  * **处理逻辑：** 消息列表获取→未读标识→详情查看→已读状态更新
  * **输出/预期结果：** 消息列表和详情展示
* **FR3.6 文件上传管理**
  * **描述：** 支持报价相关文件的上传、预览和管理
  * **输入：** 文件上传操作
  * **处理逻辑：** 文件大小验证→格式检查→上传处理→列表更新
  * **输出/预期结果：** 文件成功上传并关联到报价
* **FR3.7 移动端支持：** 开发移动端应用，方便供应商随时查看询价和提交报价

#### **模块四：油品询价管理模块**

* **FR4.1 询价单管理**
  
  * **描述：** 完整的询价单生命周期管理，从创建到完成的全流程
  * **输入：** 询价单表单数据
  * **处理逻辑：** 表单验证→数据保存→状态流转→邮件通知
  * **输出/预期结果：** 询价单创建成功并进入相应状态

* **FR4.2 询价单状态管理**
  
  * **描述：** 支持询价单在不同阶段的状态转换和操作
  * **输入：** 状态变更操作
  * **处理逻辑：** 当前状态验证→操作权限检查→状态转换→相关通知
  * **输出/预期结果：** 询价单状态成功变更

* **FR4.3 报价管理与评估**
  * **描述：** 收集、展示和评估供应商提交的报价
  * **输入：** 报价查看和处理请求
  * **处理逻辑：** 报价数据获取→对比分析→决策支持
  * **输出/预期结果：** 报价对比表和决策建议
  
* **FR4.4 中标确认**
  * **描述：** 确认中标供应商并生成中标报价单
  * **输入：** 中标供应商选择
  * **处理逻辑：** 报价验证→中标确认→通知发送→后续流程触发
  * **输出/预期结果：** 中标结果确定，生成中标报价单
  
* **FR4.5 询价报告生成**
  * **描述：** 生成询价过程的综合报告，包括参与供应商、报价对比等
  * **输入：** 报告生成请求
  * **处理逻辑：** 数据汇总→报告生成→格式化输出
  * **输出/预期结果：** 完整的询价过程报告
  
  
  
  

### 3.2 数据需求 (Data Requirements)

* **数据实体一：供应商 (Supplier)**
  * **属性：** 供应商ID、名称、代码、联系人、联系电话、邮箱、地址、油品类型、等级、资质证书编号、状态、创建时间、更新时间
  * **来源：** 供应商注册表单、管理员录入
  * **存储：** 供应商主表，关联附件表和合同表

* **数据实体二：询价单 (Inquiry)**
  * **属性：** 询价单ID、名称、油品类型、数量、报价开始时间、报价结束时间、交货地址、状态、创建人、创建时间
  * **来源：** 采购人员创建
  * **存储：** 询价单主表，关联供应商邀请表

* **数据实体三：报价单 (Quotation)**
  * **属性：** 报价单ID、询价单ID、供应商ID、油品单价、运费单价、总金额、交货时间、报价状态、提交时间、备注
  * **来源：** 供应商门户提交
  * **存储：** 报价单主表，关联附件表

* **数据实体四：采购订单 (PurchaseOrder)**
  * **属性：** 订单ID、询价单ID、供应商ID、油品类型、数量、单价、总金额、付款方式、交货地址、订单日期、状态
  * **来源：** 中标报价单生成
  * **存储：** 采购订单表

* **数据实体五：变更记录 (ChangeRecord)**
  * **属性：** 记录ID、供应商名称、变更类型、变更字段、原值、新值、变更人、变更时间、审批状态、审批人、审批时间
  * **来源：** 系统自动记录
  * **存储：** 变更记录表

* **数据实体六：消息通知 (Message)**
  * **属性：** 消息ID、接收人、消息类型、标题、内容、发送时间、是否已读、关联业务ID
  * **来源：** 系统自动生成
  * **存储：** 消息通知表

### 3.3 非功能需求 (Non-functional Requirements)

* **性能：** 代码中使用了分页加载、异步处理、模拟延迟等性能优化策略，支持大量数据的高效处理
* **可用性：** 提供清晰的导航结构、详细的表单验证、友好的错误提示和操作确认机制
* **安全性：** 实现了文件上传验证、表单数据验证、操作权限控制和状态验证机制
* **兼容性：** 基于React或者Vue和Ant Design框架，确保现代浏览器的良好兼容性和响应式设计

## 4. 核心业务流程 (Core Business Flows)

### **流程一：供应商注册与审批流程**
1. 采购人员创建新供应商记录
2. 填写供应商基本信息和上传资质文件（表单验证）
3. 提交审批
4. 部门经理审批（审批节点处理）
5. 总经理最终审批（审批流程完成）
6. 供应商状态更新为"正常"（可参与询价）

### **流程二：询价到中标完整流程**
1. 采购人员创建询价单
2. 发布询价邀请（邮件和短信通知供应商）
3. 供应商查看询价并提交报价
4. 采购人员收集和评估报价
5. 确认中标供应商
6. 生成中标报价单并通知供应商
7. 创建采购订单

## 5. 假设与约束 (Assumptions and Constraints)

### **功能约束：**
- 供应商每个询价单只能提交2次报价
- 文件上传大小限制为10MB
- 邮件发送功能当前为模拟实现，需集成真实邮件服务

### **数据约束：**
- 供应商代码和邮箱需保证唯一性
- 询价单结束时间必须晚于开始时间
- 报价金额必须为正数

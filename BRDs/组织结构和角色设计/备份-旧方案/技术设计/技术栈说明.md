# 组织架构管理系统技术栈说明

## 1. 前端技术栈

### 1.1 核心框架
- **React 18.x** - 现代化前端框架，支持Hook和函数式组件
- **React Router 6.x** - 前端路由管理，支持嵌套路由和懒加载
- **Ant Design 5.x** - 企业级UI组件库，提供完整的设计语言

### 1.2 状态管理
- **useState/useEffect** - React内置Hook进行状态管理
- **Context API** - 全局状态共享（用户信息、权限信息）

### 1.3 工具库
- **Axios** - HTTP客户端，用于API请求
- **Day.js** - 轻量级日期处理库
- **lodash** - 实用工具函数库

### 1.4 开发工具
- **Create React App** - 项目脚手架
- **ESLint + Prettier** - 代码规范和格式化
- **TypeScript** - 类型安全（建议升级）

## 2. 后端技术栈

### 2.1 核心框架
```xml
<!-- Spring Boot 基础框架 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <version>2.7.14</version>
</dependency>

<!-- Spring Security 安全框架 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
    <version>2.7.14</version>
</dependency>

<!-- Spring Boot 数据访问 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
    <version>2.7.14</version>
</dependency>
```

### 2.2 数据访问层
```xml
<!-- MyBatis Plus -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.3</version>
</dependency>

<!-- MySQL 连接驱动 -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.33</version>
</dependency>

<!-- 连接池 -->
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>druid-spring-boot-starter</artifactId>
    <version>1.2.18</version>
</dependency>
```

### 2.3 缓存和工具
```xml
<!-- Redis 缓存 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
    <version>2.7.14</version>
</dependency>

<!-- JSON 处理 -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.15.2</version>
</dependency>

<!-- 参数验证 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
    <version>2.7.14</version>
</dependency>
```

### 2.4 API文档
```xml
<!-- Swagger/OpenAPI 3.0 -->
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-ui</artifactId>
    <version>1.7.0</version>
</dependency>
```

## 3. 数据库设计

### 3.1 数据库选型
- **MySQL 8.0+** - 关系型数据库，支持事务和外键约束
- **InnoDB存储引擎** - 支持行级锁和事务ACID特性
- **UTF8MB4字符集** - 完整的Unicode支持

### 3.2 核心表结构
```sql
-- 主要数据表
organization_unit       -- 组织单元表（核心）
organization_user      -- 用户表
role_configuration     -- 角色配置表
permission             -- 权限定义表
role_permission        -- 角色权限关联表
legal_entity          -- 法人主体表
role_org_type         -- 角色适用组织类型表
organization_type_dict -- 组织类型定义表
```

## 4. 部署架构

### 4.1 容器化部署
```yaml
# docker-compose.yml
version: '3.8'
services:
  organization-frontend:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./dist:/usr/share/nginx/html

  organization-backend:
    image: openjdk:11-jre
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
    depends_on:
      - mysql
      - redis

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: bos_client_organization
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
```

### 4.2 生产环境配置
- **负载均衡**: Nginx/HAProxy
- **应用服务器**: Tomcat内嵌 (Spring Boot)
- **数据库**: MySQL主从复制
- **缓存**: Redis集群
- **监控**: Prometheus + Grafana

## 5. 开发环境搭建

### 5.1 前端环境
```bash
# 安装依赖
npm install

# 启动开发服务器
npm start

# 构建生产版本
npm run build
```

### 5.2 后端环境
```bash
# 编译项目
mvn clean compile

# 运行应用
mvn spring-boot:run

# 打包部署
mvn clean package
```

### 5.3 数据库初始化
```bash
# 创建数据库
mysql -u root -p
CREATE DATABASE bos_client_organization;

# 执行SQL脚本
mysql -u root -p bos_client_organization < organization_database_design.sql
```

## 6. 接口设计规范

### 6.1 RESTful API设计
```java
// 统一响应格式
public class Result<T> {
    private boolean success;
    private String message;
    private T data;
    private String code;
}

// 接口路径规范
GET    /api/organization/tree           -- 获取组织树
POST   /api/organization/unit           -- 新增组织
PUT    /api/organization/unit/{id}      -- 更新组织
DELETE /api/organization/unit/{id}      -- 删除组织
GET    /api/organization/users?orgId=1  -- 获取用户列表
```

### 6.2 权限控制
```java
// 基于注解的权限控制
@PreAuthorize("hasAuthority('org:add')")
public Result<OrgUnitDTO> addOrgUnit(@RequestBody AddOrgUnitRequest request) {
    // 业务逻辑
}

// 数据权限过滤
@DataScope(deptAlias = "ou", userAlias = "u")
public List<UserDTO> getUsersByOrgId(Long orgId) {
    // 根据用户权限范围过滤数据
}
```

## 7. 性能优化方案

### 7.1 前端优化
- **代码分割**: 路由级别的懒加载
- **缓存策略**: 组织树数据本地缓存
- **虚拟滚动**: 大数据量列表优化
- **防抖节流**: 搜索和表单提交优化

### 7.2 后端优化
- **数据库索引**: 关键字段建立合适索引
- **查询优化**: 避免N+1查询，使用批量查询
- **缓存策略**: Redis缓存热点数据
- **分页查询**: 大数据量分页加载

### 7.3 系统架构优化
- **读写分离**: 主从数据库分离
- **微服务拆分**: 组织服务独立部署
- **CDN加速**: 静态资源CDN分发
- **限流熔断**: 保护系统稳定性

---

**技术栈版本**: v1.0  
**最后更新**: 2024-01-01  
**维护团队**: BosClient开发团队 
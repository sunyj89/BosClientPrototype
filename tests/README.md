# Playwright è‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ Playwright è¿›è¡Œç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè¦†ç›–ï¼š

- ğŸ” **ç”¨æˆ·è®¤è¯**ï¼šç™»å½•ã€ç™»å‡ºåŠŸèƒ½
- ğŸ“Š **ä»ªè¡¨æ¿**ï¼šé¡µé¢åŠ è½½ã€ç»„ä»¶æ˜¾ç¤ºã€å“åº”å¼å¸ƒå±€
- ğŸ¢ **ä¸šåŠ¡æ¨¡å—**ï¼šä¾›åº”å•†ç®¡ç†ã€æ²¹å“ç®¡ç†ç­‰æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- ğŸ”Œ **API æ¥å£**ï¼šåç«¯æ¥å£çš„åŠŸèƒ½å’Œé”™è¯¯å¤„ç†æµ‹è¯•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
npm install
npx playwright install
```

### 2. å¯åŠ¨åº”ç”¨
```bash
npm start
```

### 3. è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:e2e

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx playwright test tests/auth/login.spec.js

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
npx playwright test -g "ç™»å½•åŠŸèƒ½"
```

## ğŸ› ï¸ æµ‹è¯•å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `npm run test:e2e` | è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ— å¤´æ¨¡å¼ï¼‰ |
| `npm run test:e2e:headed` | è¿è¡Œæµ‹è¯•ï¼ˆæ˜¾ç¤ºæµè§ˆå™¨ï¼‰ |
| `npm run test:e2e:ui` | æ‰“å¼€ Playwright UI ç•Œé¢ |
| `npm run test:e2e:debug` | è°ƒè¯•æ¨¡å¼è¿è¡Œæµ‹è¯• |
| `npm run test:e2e:report` | æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š |

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ auth/                 # è®¤è¯ç›¸å…³æµ‹è¯•
â”‚   â””â”€â”€ login.spec.js    # ç™»å½•åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ pages/               # é¡µé¢çº§æµ‹è¯•
â”‚   â””â”€â”€ dashboard.spec.js # ä»ªè¡¨æ¿é¡µé¢æµ‹è¯•
â”œâ”€â”€ modules/             # ä¸šåŠ¡æ¨¡å—æµ‹è¯•
â”‚   â””â”€â”€ supplier.spec.js # ä¾›åº”å•†ç®¡ç†æµ‹è¯•
â”œâ”€â”€ api/                 # API æ¥å£æµ‹è¯•
â”‚   â””â”€â”€ api.spec.js      # æ¥å£åŠŸèƒ½æµ‹è¯•
â””â”€â”€ utils/               # æµ‹è¯•å·¥å…·
    â””â”€â”€ auth.js          # è®¤è¯è¾…åŠ©å‡½æ•°
```

## ğŸ¯ æµ‹è¯•åœºæ™¯è¦†ç›–

### ç™»å½•åŠŸèƒ½æµ‹è¯•
- âœ… æˆåŠŸç™»å½•
- âœ… ç”¨æˆ·å/å¯†ç ä¸ºç©ºçš„é”™è¯¯æç¤º
- âœ… é”™è¯¯å‡­æ®çš„å¤„ç†
- âœ… è®°ä½æˆ‘åŠŸèƒ½

### ä»ªè¡¨æ¿æµ‹è¯•
- âœ… é¡µé¢åŠ è½½å’Œå¸ƒå±€éªŒè¯
- âœ… å¯¼èˆªèœå•æ˜¾ç¤º
- âœ… ç»Ÿè®¡å¡ç‰‡å’Œå›¾è¡¨ç»„ä»¶
- âœ… å“åº”å¼å¸ƒå±€é€‚é…

### ä¾›åº”å•†ç®¡ç†æµ‹è¯•
- âœ… åˆ—è¡¨é¡µé¢åŠ è½½
- âœ… æœç´¢åŠŸèƒ½
- âœ… æ–°å¢/ç¼–è¾‘/åˆ é™¤æ“ä½œ
- âœ… åˆ†é¡µå’Œæ’åºåŠŸèƒ½

### API æ¥å£æµ‹è¯•
- âœ… ç”¨æˆ·è®¤è¯æ¥å£
- âœ… CRUD æ“ä½œæ¥å£
- âœ… é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç éªŒè¯

## âš™ï¸ é…ç½®è¯´æ˜

### æµè§ˆå™¨æ”¯æŒ
- Chrome (Chromium)
- Firefox
- Safari (WebKit)
- Mobile Chrome
- Mobile Safari

### æµ‹è¯•é…ç½®
- **åŸºç¡€URL**: `http://127.0.0.1:3000`
- **è¶…æ—¶æ—¶é—´**: é»˜è®¤ 30 ç§’
- **é‡è¯•æ¬¡æ•°**: CI ç¯å¢ƒ 2 æ¬¡ï¼Œæœ¬åœ° 0 æ¬¡
- **å¹¶è¡Œæ‰§è¡Œ**: æ”¯æŒå¤šçº¿ç¨‹å¹¶è¡Œæµ‹è¯•

## ğŸ“ ç¼–å†™æµ‹è¯•ç”¨ä¾‹

### åŸºæœ¬ç»“æ„
```javascript
const { test, expect } = require('@playwright/test');
const { AuthHelper } = require('../utils/auth');

test.describe('æµ‹è¯•å¥—ä»¶åç§°', () => {
  test.beforeEach(async ({ page }) => {
    // æµ‹è¯•å‰ç½®æ“ä½œ
    const auth = new AuthHelper(page);
    await auth.login();
  });

  test('æµ‹è¯•ç”¨ä¾‹åç§°', async ({ page }) => {
    // æµ‹è¯•æ­¥éª¤
    await page.goto('/some-page');
    await expect(page.locator('.some-element')).toBeVisible();
  });
});
```

### æœ€ä½³å®è·µ
1. **ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•åç§°**ï¼šç”¨ä¸­æ–‡æè¿°æµ‹è¯•ç›®çš„
2. **ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹äº’ä¸ä¾èµ–
3. **ä½¿ç”¨ç¨³å®šçš„é€‰æ‹©å™¨**ï¼šä¼˜å…ˆä½¿ç”¨ data-testidã€class ç­‰
4. **é€‚å½“çš„ç­‰å¾…ç­–ç•¥**ï¼šä½¿ç”¨ `waitForSelector` è€Œé `waitForTimeout`
5. **é”™è¯¯å¤„ç†**ï¼šè€ƒè™‘å…ƒç´ å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ

## ğŸ”§ è°ƒè¯•æŠ€å·§

### 1. æ˜¾ç¤ºæµè§ˆå™¨è°ƒè¯•
```bash
npx playwright test --headed --debug
```

### 2. ä½¿ç”¨ Playwright Inspector
```bash
npx playwright test --debug
```

### 3. æˆªå›¾å’Œè§†é¢‘
- å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾
- å¤±è´¥æ—¶å½•åˆ¶è§†é¢‘
- æŸ¥çœ‹ `test-results/` ç›®å½•

### 4. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
```bash
npx playwright show-report
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: æµ‹è¯•è¿è¡Œå¾ˆæ…¢ï¼Ÿ
A: è€ƒè™‘ï¼š
- å‡å°‘ `waitForTimeout` çš„ä½¿ç”¨
- ä½¿ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨
- å¯ç”¨å¹¶è¡Œæ‰§è¡Œ

### Q: é€‰æ‹©å™¨æ‰¾ä¸åˆ°å…ƒç´ ï¼Ÿ
A: å°è¯•ï¼š
- æ£€æŸ¥å…ƒç´ æ˜¯å¦éœ€è¦ç­‰å¾…åŠ è½½
- ä½¿ç”¨æ›´é€šç”¨çš„é€‰æ‹©å™¨
- æ·»åŠ è°ƒè¯•è¾“å‡ºæŸ¥çœ‹é¡µé¢çŠ¶æ€

### Q: ç™»å½•æ€»æ˜¯å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ï¼š
- åº”ç”¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
- ç™»å½•å‡­æ®æ˜¯å¦æ­£ç¡®
- ç½‘ç»œè¯·æ±‚æ˜¯å¦æ­£å¸¸

## ğŸ“Š CI/CD é›†æˆ

å¯ä»¥å°†æµ‹è¯•é›†æˆåˆ° GitHub Actionsã€Jenkins ç­‰ CI/CD å¹³å°ï¼š

```yaml
# .github/workflows/e2e-tests.yml
name: E2E Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npx playwright install --with-deps
      - run: npm run test:e2e
``` 
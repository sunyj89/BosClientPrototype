作为产品经理，我将为您描述这款基于 React.js + Ant Design 的审批流程设计器的前端需求。这些需求旨在清晰地传达功能点，方便您与 Cursor (或其他AI编程助手) 进行高效的开发协作。我们将暂时使用 Mock 数据，不涉及后端数据库交互。

**项目目标：** 开发一个直观、易用的前端审批流程设计器，用户可以通过拖拽和配置的方式，灵活定义审批流程的各个环节和流转规则。

---

**一、核心设计器界面与交互 (Workflow Designer UI & Interaction)**

1.  **R1.1: 主界面布局**
    * **R1.1.1:** 系统应提供一个三栏式布局：
        * 左侧：**节点面板 (Node Palette)**，用于展示所有可用的流程节点类型。
        * 中间：**工作区/画布 (Workflow Canvas)**，用户在此区域通过拖拽和连接节点来构建流程图。
        * 右侧：**属性面板 (Properties Panel)**，用于显示和编辑当前选中节点或连接线的详细属性。
    * **R1.1.2:** 画布应支持适当的缩放和拖拽查看功能，便于处理复杂流程。

2.  **R1.2: 节点面板 (Node Palette)**
    * **R1.2.1:** 节点面板应清晰列出所有可供选择的流程节点类型，每种节点应有明确的图标和名称。
    * **R1.2.2:** 初步支持以下节点类型（基于图片和通用需求）：
        * **开始节点 (Start Node):** 标识流程的起点 (通常隐含或是“提交”节点的特性)。
        * **提交节点 (Submit Node):** 对应图片中的“提交”操作。
        * **审批节点 (Approval Node):** 对应图片中的“审批”操作。
        * **办理节点 (Action/Handling Node):** 对应图片中可能的“办理”操作（若与审批不同）。
        * **条件分支节点 (Conditional Branch Node):** 用于根据不同条件将流程导向不同路径，对应图片中的“条件分支”。
        * **结束节点 (End Node):** 标识流程的终点。
    * **R1.2.3:** 用户应能从节点面板中拖拽节点到画布上，或通过点击节点面板中的节点类型，然后在画布上指定位置单击以放置新节点。放置后，光标应恢复正常状态。

3.  **R1.3: 画布交互 (Workflow Canvas Interaction)**
    * **R1.3.1: 节点放置:** 当用户从节点面板选择一个节点类型后，鼠标在画布上移动时，应有清晰的视觉反馈（如显示节点虚影跟随鼠标，或鼠标指针变为添加状态）。单击画布即可在该位置放置一个新节点，新节点应有默认名称和唯一的ID。
    * **R1.3.2: 节点选择:** 用户单击画布上的任一节点，该节点应被高亮显示为“选中”状态，同时属性面板应更新以显示该节点的配置项。再次单击画布空白处或按 `ESC` 键可取消节点选择。
    * **R1.3.3: 节点拖拽移动:** 用户应能通过鼠标拖拽画布上已存在的节点到新的位置。拖拽过程中应有视觉反馈。
    * **R1.3.4: 节点删除:** 用户应能删除选中的节点（例如，通过键盘 `Delete` 键或右键菜单中的删除选项）。删除节点时，与其相关的连接线也应一并被删除。
    * **R1.3.5: 连接线绘制:**
        * 用户应能从一个节点的特定输出锚点拖拽出一条连接线。拖拽过程中，连接线的一端应跟随鼠标光标。
        * 当光标移动到另一个节点的有效输入锚点上时，该锚点应高亮提示可连接。
        * 松开鼠标后，如果目标锚点有效，则在两个节点间创建一条带箭头的连接线，表示流程方向。
        * 如果未连接到有效目标，则取消画线操作。
    * **R1.3.6: 连接线选择与删除:** 用户应能选择连接线（例如，单击连接线），并在属性面板中查看/编辑其属性（若有）。选中的连接线应能被删除。
    * **R1.3.7: "+"快捷添加节点:** 在节点下方或连接线上特定位置（如图片中所示），应显示一个“+”图标按钮。点击该按钮，可以快捷地在当前位置之后插入一个新的常用节点（如审批节点），并自动连接。

---

**二、节点功能与配置 (Node Functionality & Configuration)**

1.  **R2.1: 通用节点属性**
    * **R2.1.1:** 每个节点都应具有一个可编辑的“节点名称”。
    * **R2.1.2:** 系统自动为每个节点分配一个唯一ID（前端生成即可，用于Mock数据）。

2.  **R2.2: 提交节点 (Submit Node) - 参考 `image_038f3b.png`**
    * **R2.2.1: 提交人设置:** 属性面板应允许配置“提交人”的范围（Mock阶段可为文本描述，如“全员可提交”）。
    * **R2.2.2: 抄送人设置:** 属性面板应允许配置“抄送人”（Mock阶段可为简单的文本输入或人员选择占位）。

3.  **R2.3: 审批节点 (Approval Node) - 参考 `image_039209.jpg`**
    * **R2.3.1: 审批类型:** 属性面板应提供“审批类型”选项，至少包括：
        * 人工审批 (默认)
        * 自动通过
        * 自动拒绝
    * **R2.3.2: 审批人设置:**
        * 提供“设置审批人”的入口/按钮。
        * 支持多种审批人类型选择（Mock阶段，选择后可在文本区域显示描述即可，无需真实人员数据）：
            * 上级 (例如，直属上级、第二级上级)
            * 指定成员 (允许添加一个或多个具体的人员占位符)
            * 用户组 (允许选择用户组占位符)
            * 角色 (允许选择角色占位符)
            * 提交人本人
            * 部门负责人 (提交人所在部门的负责人占位符)
            * 连续多级上级 (例如，直到第N级上级)
            * 提交人自选 (在流程启动时由提交人选择)
        * 允许配置“审批人为空时”的处理策略 (例如：自动通过、转交管理员 - Mock阶段为选项)。
        * 应能添加多个审批人规则（例如，先由部门负责人审批，再由指定成员审批）。
    * **R2.3.3: 表单权限 (占位):** 属性面板应有“表单权限”的配置入口占位（具体权限规则暂不实现）。
    * **R2.3.4: 操作权限 (占位):** 属性面板应有“操作权限”的配置入口占位。
    * **R2.3.5: 审批效率统计:** 提供“不计入审批效率统计”的复选框。
    * **R2.3.6: 节点状态提示:** 画布上的审批节点如果审批人未配置，应有明显视觉提示（如图片中的红色感叹号）。

4.  **R2.4: 条件分支节点 (Conditional Branch Node) - 参考 `image_038f3b.png`**
    * **R2.4.1: 添加分支:** 用户选中条件节点后，应能通过属性面板或画布上的快捷操作（如“+ 添加条件分支”）来增加新的条件分支路径。
    * **R2.4.2: 分支属性配置:**
        * 每个分支路径应可设置“分支名称”（例如：“条件分支1”、“金额大于1000”）。
        * 每个分支应可设置“优先级”（数字表示，数字越小优先级越高）。
        * 应有“请设置条件”的提示或入口，用于将来配置具体的条件表达式（Mock阶段可为文本输入框填写描述性条件）。
    * **R2.4.3: “其他情况”分支:** 系统应支持或能方便地配置一个“其他情况”分支，当所有其他条件都不满足时，流程进入此分支。该分支通常优先级最低。
    * **R2.4.4: 分支路径连接:** 从条件分支节点引出的每条分支路径（表现为一条连接线）指向下一个流程节点。

---

**三、属性面板 (Properties Panel)**

1.  **R3.1: 上下文感知:** 属性面板显示的内容必须根据当前在画布上选中的元素（节点或连接线）动态更新。
2.  **R3.2: 未选择任何元素时:** 属性面板可以显示流程的全局设置（若有）或保持空白/提示选择元素。
3.  **R3.3: Ant Design组件应用:** 属性面板中的表单、输入框、选择器、按钮等均应使用 Ant Design 组件以保证UI一致性和开发效率。
4.  **R3.4: 配置保存:** 属性面板底部应有“保存”（或“应用”）和“取消”按钮。
    * “保存”：将面板中的修改应用到 Mock 数据中的对应节点/连接线对象。
    * “取消”：放弃当前在面板中的修改，恢复到上次保存的状态。
    * (对于简单场景，也可以设计为属性即时更新，无需显式保存按钮，但需明确)。

---

**四、工作流 Mock 数据管理 (Workflow Mock Data Management)**

1.  **R4.1: 初始化加载:** 页面加载时，应能加载一个预设的 Mock 流程数据并在画布上渲染出来。
2.  **R4.2: “保存”流程 (Mock):** 提供一个“保存”按钮，点击后将当前画布上的流程图结构（节点、连接线及其属性）序列化为 JSON 格式，并输出到浏览器控制台 (console.log) 或显示在页面的一个文本区域内。
3.  **R4.3: “加载”流程 (Mock):** 提供一个“加载”按钮和一个文本输入区域。用户可以将之前保存的 JSON 字符串粘贴到输入区，点击加载后，画布应清空并根据此 JSON 数据重新渲染流程图。

---

**五、通用UI/UX要求**

1.  **R5.1: 视觉风格:** 整体界面风格应简洁、专业，参考 Ant Design 的设计规范。
2.  **R5.2: 交互反馈:** 用户的关键操作（如添加、删除、连接、保存配置）应有即时的视觉反馈和状态提示（如使用 Ant Design 的 `message` 或 `notification` 组件）。
3.  **R5.3: 撤销/重做 (可选，高级功能):** 如果时间和资源允许，可以考虑实现画布操作的撤销和重做功能。

---

这些需求描述了您需要构建的前端审批流程设计器的核心功能。在与 Cursor 交互时，您可以按功能模块（如“实现节点面板并支持拖拽添加审批节点到画布”）或具体需求点（如“R2.3.2: 实现审批节点的审批人类型选择功能，Mock数据即可”）来引导其生成代码或提供建议。祝您开发顺利！